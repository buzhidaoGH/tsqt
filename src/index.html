<!DOCTYPE html>
<html lang="zh_CN">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="http://imop.i.51rs.cn/ts/gw/images/favicon.ico" rel="icon">
  <link rel="stylesheet" href="./assets/lib/layui-v2.7.6/css/layui.css">
  <link rel="stylesheet" href="./assets/lib/fontawesome-free-6.2.0-web/css/all.min.css">
  <title>天书 - 工具箱</title>
  <style type="text/css">
    #tsqt-side .layui-nav .layui-this > a,
    #tsqt-side .layui-nav-item .layui-this > a {
      background-color: lightgreen !important;
    }

    #firstPrompt {
      position: fixed;
      top: 70px;
      right: 60px;
      z-index: 999;
      color: red;
      font-size: 18px;
      display: none;
    }
  </style>
</head>

<body>
  <!-- 主页面版 -->
  <div class="tsqt-container layui-layout layui-layout-admin" id="tsqt_toolbox">
    <!-- 头部 -->
    <div class="layui-header layui-bg-green" style="box-shadow: 0 2px 4px 0 rgba(85,131,214,.4);">
      <div class="layui-col-sm3 layui-hide-xs" style="text-align: center">
        <a href="http://t.imop.com/" target="_blank"><img src="./assets/img/bg1.png" alt="背景1加载失败"></a>
      </div>
      <div class="layui-col-xs12 layui-col-sm6" style="line-height: 60px;text-align: center">
        <span style="vertical-align: middle;font-size: 18px">项目仅做学习与技术交流</span>
      </div>
      <div class="layui-col-sm3 layui-hide-xs" style="line-height: 60px;text-align: center">
        <span id="rightTitle" style="font-size: 16px;display: block;line-height: 30px"></span>
        <span id="nowTime" style="font-size: 15px;display: block;line-height: 30px">
          欢迎使用 “天书 - 工具箱”
        </span>
      </div>
    </div>

    <!-- 侧边栏 -->
    <div id="tsqt-side" class="layui-side layui-bg-blue">
      <div class="layui-side-scroll">
        <!-- 左侧导航区域（可配合layui已有的垂直导航） -->
        <ul class="layui-nav-tree layui-nav layui-bg-blue">
          <li class="layui-nav-item" style="background-color: #156FB2" id="side_home">
            <a href="./pages/home/home.html">首&emsp;&emsp;页</a>
          </li>
          <li class="layui-nav-item layui-nav-itemed">
            <a href="javascript:">功能模拟</a>
            <dl class="layui-nav-child">
              <dd><a href="./pages/simulation/equipment.html">装备&套装</a></dd>
              <dd><a href="./pages/simulation/mentalSkill.html">心法&经脉</a></dd>
              <dd><a href="./pages/simulation/martial.html">武功&转职</a></dd>
              <dd><a href="./pages/simulation/trigrams.html">八卦&宝石</a></dd>
            </dl>
          </li>
          <li class="layui-nav-item">
            <a href="javascript:">基础数据</a>
            <dl class="layui-nav-child">
              <dd><a href="javascript:">待定暂无</a></dd>
            </dl>
          </li>
          <li class="layui-nav-item layui-nav-itemed">
            <a href="javascript:">其&emsp;&emsp;他</a>
            <dl class="layui-nav-child">
              <dd><a href="./pages/other/dailyChecklist.html">日常清单</a></dd>
              <dd><a href="javascript:">失信名单</a></dd>
            </dl>
          </li>
          <li class="layui-nav-item layui-nav-itemed">
            <a href="javascript:">作者中心</a>
            <dl class="layui-nav-child">
              <dd><a href="./pages/author/notice.html">须知说明</a></dd>
              <dd id="side_disclaimer"><a href="./pages/author/disclaimer.html">免责协议</a></dd>
            </dl>
          </li>
        </ul>
        <img src="./assets/img/toolbox.png" style="width: 100px;margin: 10px auto;display: block" alt="加载失败">
        <span style="font-size: 17px;margin: 0 auto;width:100%;display: inline-block;text-align: center">天书-工具箱</span>
        <hr style='height:1px;background-color: #eee'>
        <span style="font-size: 17px;margin: 0 auto;width:100%;display: inline-block;text-align: center">TianShu
          ToolBox</span>
      </div>
    </div>

    <!-- 内容栏 -->
    <div id="tsqt-body" class="layui-body">
      <div class="layui-fluid" style="min-height: 100%;background-color: #F5F5F5">
        <div class="layui-row">
          <div id="tsqt-main" class="layui-col-xs10 layui-col-xs-offset1"
               style="font-size:16px;margin-top: 10px;margin-bottom: 55px;padding:20px;"></div>
        </div>
      </div>
    </div>

    <!-- 固定底部 -->
    <div class="layui-footer" style="text-align: center">
      <div class="layui-input-inline" style="min-width: 250px;">
        <input id="evalInput" placeholder="一个简单便捷的计算器(按回车计算)" class="layui-input">
      </div>
      <div id="evalOutput" class="layui-input-inline" style="min-width: 40px;">
        =结果
      </div>
    </div>
  </div>
  <div id="firstPrompt"></div>
  <script src="./assets/lib/crypto-js-4.1.1.js"></script>
  <script src="./assets/lib/jquery-1.11.2.js"></script>
  <script src="./assets/lib/layui-v2.7.6/layui.js"></script>
  <script src="./assets/index.js"></script>
  <script type="text/javascript">
    $(function () {
      //调用定时日期
      nowTime()

      fetch('./assets/db/base.json')
      .then(res => res.json())
      .then(data => {
        $('#rightTitle').html('欢迎使用 天书-工具箱' + data.version)
      })

      // 给所有子标签添加事件,包括后续出现的
      $("#tsqt-side").on("click", "ul>li>dl>dd>a,ul>li:first-child>a", aHrefTo)
      // 首次跳转
      firstVisited()
      $("#evalInput").bind('keypress', function ({keyCode}) {
        if (keyCode === 13) {
          let inp = $(this).val().replaceAll('X', '*').replaceAll('x', '*').replaceAll('^', '**')
          $('#evalOutput').html('=' + eval(inp) + '&emsp;&emsp;口语化：' + intToChinese(eval(inp)))
        }
      })

      window.addEventListener('keydown', function (e) {
        if ((e.key === 'S' || e.key === 's') && (navigator.platform.match('Mac') ? e.metaKey : e.ctrlKey)) {
          e.preventDefault()
        }
        if (e.key === 'F12') {
          e.preventDefault()
        }
      })
      document.oncontextmenu = function () { return false }
    })

    // 定时日期
    function nowTime() {
      let time = showRealTime()
      $("#nowTime").html(time)
      setInterval(function () {
        time = showRealTime()
        $("#nowTime").html(time)
      }, 1000)
    }

    // 给 ul>li>dl>dd>a 标签注册点击事件,不同的url访问不同的地址(刷新内容)
    function aHrefTo() {
      let url = $(this).attr('href')
      if (url === 'javascript:') {
        layui.layer.alert('还未开发完毕!', {icon: 1})
        return false
      }
      // 按照url加载内容到 #pages-content
      $("#tsqt-main").load(url)
      return false
    }

    // 获取side数据
    function sideJson() {
      fetch("./assets/db/side.json")
      .then(res => res.json())
      .then(data => {
        let con = $(" <ul class='layui-nav-tree layui-nav layui-bg-blue'></ul>")
        for (let i = 0; i < data.length; i++) {
          let node = data[i]
          let conli = $("<li class='layui-nav-item'></li>")
          let cona = $(
              "<a href='" + node.menuUrl + "'>" + node.menuTitle + "</a>")
          let childArray = node.childrenList
          console.log(childArray.length)
          if (childArray.length !== 0) {
            conli = $("<li class='layui-nav-item layui-nav-itemed'></li>")
            let condl = $("<dl class='layui-nav-child'></dl>")
            for (let j = 0; j < childArray.length; j++) {
              let child = childArray[i]
              let condd = $(
                  "<dd><a href='" + child.menuUrl + "'>" + child.menuTitle + "</a></dd>")
              condl.append(condd)
            }
            conli.append(condl)
          }
          conli.append(cona)
          con.append(conli)
        }
        $("#tsqt-side>.layui-side-scroll").prepend(con)
      })
    }
  </script>
</body>

</html>