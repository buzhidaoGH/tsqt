<!DOCTYPE html><html lang="zh_CN"><head><meta charset="UTF-8"><title>日常清单</title><style type="text/css">#tsqt-main{background-image:linear-gradient(120deg,#bc95c6,#7dc4cc);min-height:85vh;border-radius:5px;font-family:montserrat,sans-serif;font-size:16px}.activities{max-width:700px;margin:0 auto}.activities h3{margin:10px 0}.activities .task{width:100%;background:rgba(255,255,255,.5);padding:8px;margin:4px}.activities .task:hover{background:rgba(0,0,0,.5);color:#fff}.activities .task i{color:#f5f5f5;width:15px;height:15px;line-height:15px;text-align:center;margin-right:4px;padding:5px;cursor:pointer}.activities .task i:hover{color:#fe5a00;background-color:rgba(242,242,242,.5)}.activities .task .time{float:right;margin-right:40px}#dungeons,#everyday,#occasionally{max-height:360px;overflow:auto;overflow-x:hidden}#dungeons .level{display:none;float:right;margin-right:30px}#dungeons .task:hover .level{display:inline}</style></head><body><div class="activities"><h3>每日活动</h3><div id="everyday"></div><h3>今日活动</h3><div id="occasionally"></div><h3>今日副本</h3><div id="dungeons"></div></div><script src="./assets/tool.js"></script><script type="text/javascript">const weekday=(new Date).getDay();let activities,layer;function getData(e){fetch("./assets/db/activities").then(e=>e.text()).then((function(t){activities=JSON.parse(decrypt(t));let a=activities.everyDay,i=activities.occasionally,s=activities.dungeons;renderTask("#everyday",filterTask(a),"everyDay"),renderTask("#occasionally",filterTask(i),"occasionally"),renderTask("#dungeons",filterTask(s),"dungeons"),layer.close(e)}))}function renderTask(e,t,a){let i=!0;$(e).empty();for(let s of t){i=!1;const t=$(`<div class="task">\n          <i class="fas fa-check" id="${s.id}" type="${a}"></i>\n          <span>${s.name}</span>\n        </div>`);s.level&&t.append(`<span class="level">${"大于"+s.level+"级"}</span>`),s.time&&t.append(`<span class="time">${s.time}</span>`),$(e).append(t)}i&&$(e).append('<div class="task" style="text-align: center">\n          <span>今日此栏已全部完成</span>\n        </div>')}function filterTask(e){const t=[],a=getLocalStorage("completed",1)||[];for(let i of e)-1===a.indexOf(i.id)&&t.push(i);return t.filter(e=>!e.day&&0!==e.day||e.day===weekday)}$((function(){$(".activities h3").each((function(){$(this).css("color",getRandomColor())})),layui.use(["layer"],(function(){layer=layui.layer,getData(layer.msg("正在加载...",{icon:16,shade:.3,time:0}))})),$(".activities").on("click",".task>i",(function(){let e=$(this).attr("type"),t=$(this).attr("id");for(let a of activities[e])if(a.id===t){layer.msg(a.name+"<br>今日已完成",{icon:1,shade:.1,time:1e3});let e=getLocalStorage("completed",1);e?(e.push(a.id),setLocalStorage("completed",e,1)):setLocalStorage("completed",[a.id],1),getData()}}))}))</script></body></html>