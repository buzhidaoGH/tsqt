<!DOCTYPE html><html lang="zh_CN"><head><meta charset="UTF-8"><title>武功和转职</title><style type="text/css">#martial{background-color:#8b97e9;box-shadow:0 0 10px #d0273e;border-radius:5px;margin-bottom:15px}#transfer{background-color:#cd99ff;box-shadow:0 0 10px #ff99cd;border-radius:5px;margin-top:15px}</style></head><body><div class="layui-col-xs12" id="martial"><fieldset class="layui-elem-field layui-field-title" style="margin-top:20px"><legend>武功模拟</legend></fieldset><form class="layui-form"><div class="layui-form-item"><div class="layui-inline"><label class="layui-form-label">武功类别</label><div class="layui-input-inline" style="width:80px;text-align:center"><select name="martial" lay-verify="required" id="martialSelect"></select></div><label class="layui-form-label">初始级星</label><div class="layui-input-inline" style="width:80px;text-align:center"><select name="startMartialLevel" lay-verify="required" lay-filter="startMartialLevel" id="startMartialLevel"></select></div><div class="layui-input-inline" style="width:80px;text-align:center"><select name="startMartialStar" lay-verify="required" id="startMartialStar"></select></div><label class="layui-form-label">目标级星</label><div class="layui-input-inline" style="width:80px;text-align:center"><select name="endMartialLevel" lay-verify="required" lay-filter="endMartialLevel" id="endMartialLevel"></select></div><div class="layui-input-inline" style="width:80px;text-align:center"><select name="endMartialStar" lay-verify="required" id="endMartialStar"></select></div></div><div class="layui-form-item"><div class="layui-input-block"><button type="submit" class="layui-btn" lay-submit lay-filter="martialMock">模拟</button> <button type="reset" class="layui-btn layui-btn-warm">重置</button></div></div></div><div class="layui-form-item" id="mental_skill_mock"><label class="layui-form-label">武功消耗</label></div></form></div><div class="layui-col-xs12" id="transfer"><fieldset class="layui-elem-field layui-field-title" style="margin-top:20px"><legend>转职模拟</legend></fieldset><form class="layui-form"><div class="layui-form-item"><div class="layui-inline"><label class="layui-form-label">转职类别</label><div class="layui-input-inline" style="width:80px;text-align:center"><select name="transfer" lay-verify="required" id="transferSelect"></select></div><label class="layui-form-label">转职等级</label><div class="layui-input-inline" style="width:80px"><input type="text" id="startTransferLevel" name="startTransferLevel" lay-verify="required|number|transferVerify" placeholder="初始等级" autocomplete="off" class="layui-input" value="0" style="padding:0;text-align:center"></div><div class="layui-form-mid">到</div><div class="layui-input-inline" style="width:80px"><input type="text" id="endTransferLevel" name="endTransferLevel" lay-verify="required|number|transferVerify" placeholder="目标等级" autocomplete="off" class="layui-input" style="padding:0;text-align:center"></div><span>勇武：勇武300,霸体100,信心100,威慑300</span><br><span>坚韧：勇武100,霸体300,信心300,威慑100</span></div><div class="layui-form-item"><div class="layui-input-block"><button type="submit" class="layui-btn" lay-submit lay-filter="transferMock">转职模拟</button> <button type="reset" class="layui-btn layui-btn-warm" id="transferReset">重置</button> <span style="color:#000">PS:对结果进行了便捷化处理,舍弃了精度</span></div></div></div><div class="layui-form-item" id="transfer_con"></div><div class="layui-form-item" id="transfer_enh"></div></form></div><script type="text/javascript">const $startMartialLevel=$("#startMartialLevel"),$startMartialStar=$("#startMartialStar"),$endMartialLevel=$("#endMartialLevel"),$endMartialStar=$("#endMartialStar");function renderMartialLevel(e,t,a){e=parseInt(e),t.empty(),a.empty();for(let a=0;a<10;a++)t.append(`\n          <option value="${a}" ${e===a?"selected":""}>${a+1+"级"}</option>\n        `);"0"===t.val()&&a.append('<option value="0"}>0星</option>');for(let e=1;e<=10;e++)a.append(`\n          <option value="${e}"}>${e+"星"}</option>\n        `)}function martialStar(e,t){return t=parseInt(t),10*(e=parseInt(e))+t}function handleMartial(e,t,a){function l(e,t){const a={exp:.002*(e**3+3*e**2+11*e)/3,ele:10*e**2+30*e,bonus:0};return 0===t&&(a.bonus=e**2+e+3),1===t&&(a.bonus=5*e**2+5*e),2===t&&(a.bonus=2.5*e**2+2.5*e+5),3===t&&(a.bonus=1.5*e**2+1.5*e+2),4===t&&(a.bonus=2*e**2+2*e+6),a}e=parseInt(e);let n={exp:(l(t=parseInt(t),a=parseInt(a)).exp-l(e,a).exp).toFixed(3)+"（亿）",ele:(l(t,a).ele-l(e,a).ele).toFixed(1),bonus:l(t,a).bonus,ancient:0,page:0};return n.ancient=Math.ceil(n.ele/3250),n.page=Math.ceil(n.ele/19800),n}function transferCon(e,t){function a(e){return{jj:3.5*(e=parseInt(e)),spi:35*e,exp:Math.ceil((307870897.95+1547089.953*e)*e/2)}}const l=a(t),n=a(e);return{jj:l.jj-n.jj+"（万）",spi:l.spi-n.spi+"（万）",exp:((l.exp-n.exp)/10**8).toFixed(3)+"（亿）"}}function transferEnhance(e,t){e=parseInt(e);const a=[],l=[];return"0"===t?(a.push("物|法 攻",decryptText("LOotXVJj51FMgAX8bIUqSg=="),"物|法 命中","物|法 闪"),l.push(100*e,12*e,12*e,12*e)):"1"===t?(a.push("物|法 防","物|法 闪","物|法 减中",decryptText("WcdRsSG7BKgVQ2lBHcsefA==")),l.push(33*e,12*e,12*e,12*e)):"2"===t?(a.push("恢复","速度","HP","MP","异抗回合","异抗抗力"),l.push(25*e,5*e,720*e,300*e,Math.ceil(e/30),"未知")):"3"===t&&(a.push("异常加强","加强回合"),l.push(Math.trunc(40*e/3),"未知")),{nameList:a,valList:l}}$((function(){const e=[decryptText("lcVZz1cJbcgMRFo+FeuGVw=="),decryptText("0uMJjT1BY7X9DJyAuxFILg=="),decryptText("4UoZXAbLAzmn/KgdbEJt5w=="),decryptText("ouwHWgVDmFY3PNFy6rz/sQ=="),decryptText("otBBty3zK8Q6PBcG1KnDgw==")];for(let t=0;t<e.length;t++)$("#mental_skill_mock").append(`\n          <div class="layui-input-inline" style="text-align-last:center;width: 112px;text-align: center">\n            <label class="layui-form-label" style="border: rgba(0,0,0,.85) 1px solid">${e[t]}</label>\n            <input type="text" id="martialDep${t}" readonly class="layui-input" value="无" style="padding: 0">\n          </div>\n        `);const t=["经验消耗","技经消耗","元神消耗"];for(let e=0;e<t.length;e++)0===e&&$("#transfer_con").append('<label class="layui-form-label">转职消耗</label>'),$("#transfer_con").append(`\n        <div class="layui-input-inline" style="text-align-last:center;width: 112px;text-align: center">\n            <label class="layui-form-label" style="border: rgba(0,0,0,.85) 1px solid">${t[e]}</label>\n            <input type="text" id="transferCon${e}" readonly class="layui-input" value="无" style="padding: 0">\n          </div>\n        `);$("#transfer_enh").append('\n      <label class="layui-form-label">转职提供</label>\n      <div class="layui-input-inline" style="text-align-last:center;width: 112px;text-align: center">\n        <label class="layui-form-label" style="border: rgba(0,0,0,.85) 1px solid">空</label>\n        <input type="text" readonly class="layui-input" value="空" style="padding: 0">\n      </div>\n      '),$("#transferReset").click((function(){let e=$("#transfer_enh");e.empty(),e.append('\n        <label class="layui-form-label">转职提供</label>\n        <div class="layui-input-inline" style="text-align-last:center;width: 112px;text-align: center">\n          <label class="layui-form-label" style="border: rgba(0,0,0,.85) 1px solid">空</label>\n          <input type="text" readonly class="layui-input" value="空" style="padding: 0">\n        </div>\n      ')}))})),layui.use(["form","layer"],(function(){let e=layui.form,t=layui.layer;renderMartialLevel(0,$startMartialLevel,$startMartialStar),renderMartialLevel(0,$endMartialLevel,$endMartialStar),$endMartialStar.val(10),$endMartialLevel.val(9);let a=t.msg("正在获取数据...",{icon:16,shade:.3,time:0});e.verify({transferVerify:function(e){return parseInt($("#startTransferLevel").val())>parseInt($("#endTransferLevel").val())?"初始等级不能大于目标等级":e<0||e>300?"转职等级范围为0~300":void 0}}),fetch("./assets/db/base.json").then(e=>e.json()).then(l=>{let n=l.martialList,r=l.transferList;for(let e=0;e<n.length;e++)$("#martialSelect").append(`<option value="${n[e].val}">${n[e].text}</option>`);for(let e=0;e<r.length;e++)$("#transferSelect").append(`\n            <option value="${r[e].val}">${r[e].text}</option>\n          `);e.render("select"),t.close(a)}).catch(()=>{t.msg("Error出错了!",{icon:2})}),e.on("select(startMartialLevel)",(function({value:t}){renderMartialLevel(t,$startMartialLevel,$startMartialStar),e.render("select")})),e.on("select(endMartialLevel)",(function({value:t}){renderMartialLevel(t,$endMartialLevel,$endMartialStar),e.render("select")})),e.on("submit(martialMock)",(function({field:{martial:e,startMartialLevel:a,startMartialStar:l,endMartialLevel:n,endMartialStar:r}}){let i=martialStar(a,l),s=martialStar(n,r);if(i>s)return t.msg("需要 初始级星<目标级星",{icon:2}),!1;const p=handleMartial(i,s,e);return $("#martialDep0").val(p.bonus),$("#martialDep1").val(p.exp),$("#martialDep2").val(p.ele),$("#martialDep3").val(p.ancient),$("#martialDep4").val(p.page),!1})),e.on("submit(transferMock)",(function({field:{transfer:e,startTransferLevel:t,endTransferLevel:a}}){const l=$("#transfer_enh"),n=transferCon(t,a);$("#transferCon0").val(n.exp),$("#transferCon1").val(n.jj),$("#transferCon2").val(n.spi);const r=transferEnhance(a,e);for(let e=0;e<r.nameList.length;e++)0===e&&(l.empty(),l.append('<label class="layui-form-label">转职提供</label>')),l.append(`\n                <div class="layui-input-inline" style="text-align-last:center;width: 112px;text-align: center">\n                      <label class="layui-form-label" style="border: rgba(0,0,0,.85) 1px solid">${r.nameList[e]}</label>\n                      <input type="text" readonly class="layui-input" value="${r.valList[e]}" style="padding: 0">\n                    </div>\n                `);return!1}))}))</script></body></html>