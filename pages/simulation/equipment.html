<!DOCTYPE html><html lang="zh_CN"><head><meta charset="UTF-8"><title>装备&套装</title><style type="text/css">#equipmentImprove{background-color:#32d9fc;box-shadow:0 0 10px #4f42cc;border-radius:5px}#equipmentSet{background-color:#fafac8;box-shadow:0 0 10px #4f42cc;border-radius:5px;margin-top:35px}.layui-table th{text-align:center}</style></head><body><div class="layui-row"><div class="layui-col-xs12" id="equipmentImprove"><fieldset class="layui-elem-field layui-field-title" style="margin-top:20px"><legend>装备提升模拟</legend></fieldset><div style="text-align:center"><div class="layui-inline"><form class="layui-form"><div class="layui-form-item"><label class="layui-form-label">装备信息</label><div class="layui-input-inline" style="text-align-last:center;width:80px;text-align:center"><select name="equType"><option value="0">防具</option><option value="1">武器</option></select></div><div class="layui-input-inline" style="text-align:center;width:105px"><input name="now_info" placeholder="装备数值" lay-verify="required|number" class="layui-input"></div><div class="layui-input-inline" style="text-align-last:center;width:105px;text-align:center"><select id="now_star" name="now_star"></select></div><div class="layui-input-inline" style="text-align-last:center;width:105px;text-align:center"><select id="now_inscribed" name="now_inscribed"></select></div><div class="layui-input-inline" style="text-align-last:center;width:105px;text-align:center"><select id="now_quality" name="now_quality"></select></div></div><div class="layui-form-item"><label class="layui-form-label">目标选项</label><div class="layui-input-inline" style="text-align-last:center;width:105px;text-align:center"><select id="new_star" name="new_star"></select></div><div class="layui-input-inline" style="text-align-last:center;width:105px;text-align:center"><select id="new_inscribed" name="new_inscribed"></select></div><div class="layui-input-inline" style="text-align-last:center;width:105px;text-align:center"><select id="new_enchantments" name="new_enchantments"></select></div></div><div class="layui-form-item"><label class="layui-form-label">模拟结果</label><div class="layui-input-inline" style="text-align-last:center;width:112px;text-align:center"><label class="layui-form-label" style="border:rgba(0,0,0,.85) 1px solid">数值预测</label> <input type="text" id="new-info1" readonly="readonly" class="layui-input" value="无" style="padding:0"></div><div class="layui-input-inline" style="text-align-last:center;width:112px;text-align:center"><label class="layui-form-label" style="border:rgba(0,0,0,.85) 1px solid">附魔预测</label> <input type="text" id="new-info2" readonly="readonly" class="layui-input" value="无" style="padding:0"></div></div><div class="layui-form-item"><div class="layui-input-block"><button type="submit" class="layui-btn" lay-submit lay-filter="formImprove">装备模拟</button> <button type="reset" class="layui-btn layui-btn-primary">重置</button> <span style="color:#888">&emsp;&emsp;PS:模拟结果可能会有些许出入;部分装备不符合此模拟规律</span></div></div></form></div></div></div><div class="layui-col-xs12" id="equipmentSet"><fieldset class="layui-elem-field layui-field-title" style="margin-top:20px"><legend>套装快速模拟</legend></fieldset><div style="text-align:center"><div class="layui-inline"><form class="layui-form"><div class="layui-form-item"><label class="layui-form-label">套装信息</label><div class="layui-input-inline" style="text-align-last:center;width:105px;text-align:center"><select id="set_level" lay-filter="set_level" name="set_level"></select></div><div class="layui-input-inline" style="text-align-last:center;width:105px;text-align:center"><select id="set_type" name="set_type"></select></div><div class="layui-input-inline" style="text-align-last:center;width:105px;text-align:center"><select><option value="0">装备品质</option><option value="1" selected="selected">光芒</option></select></div><div class="layui-input-inline" style="text-align-last:center;width:105px;text-align:center"><select id="set_star" name="set_star"></select></div><div class="layui-input-inline" style="text-align-last:center;width:105px;text-align:center"><select id="set_inscribed" name="set_inscribed"></select></div></div><div class="layui-form-item"><label class="layui-form-label">&emsp;</label><div class="layui-input-inline" style="text-align-last:center;width:105px;text-align:center"><select id="set_enchantments" name="set_enchantments"></select></div><div class="layui-input-inline" style="text-align-last:center;width:145px;text-align:center"><select id="set_enchantments_quantity" name="set_enchantments_quantity"><option value="-1">附魔数量</option><option value="5">5法附魔</option><option value="4">4法附魔</option><option value="3">3法附魔</option><option value="2">2法附魔</option><option value="1">1法附魔</option><option value="0">0法附魔</option></select></div></div><div class="layui-form-item"><div class="layui-input-block"><button type="submit" class="layui-btn" lay-submit lay-filter="formSet">套装模拟</button> <button type="reset" class="layui-btn layui-btn-primary">重置</button> <span style="color:#888">&emsp;&emsp;PS:模拟结果可能会有些许出入;部分装备不符合此模拟规律</span></div></div></form></div></div></div></div><div id="content_set_table" hidden><table class="layui-table" style="text-align:center" lay-size="lg"><thead><tr><th></th><th>衣服</th><th>头饰</th><th>裤子</th><th>腰带</th><th>鞋子</th><th>护肩</th><th>披风</th><th>饰品</th><th>合计</th></tr></thead><tbody><tr id="set_table_primitive"><td>原始套装</td><td>无</td><td>无</td><td>无</td><td>无</td><td>无</td><td>无</td><td>无</td><td>无</td><td>无</td></tr><tr id="set_table_improve"><td>强化套装</td><td>无</td><td>无</td><td>无</td><td>无</td><td>无</td><td>无</td><td>无</td><td>无</td><td>无</td></tr><tr id="set_table_retrofit"><td>改造材料</td><td>无</td><td>无</td><td>无</td><td>无</td><td>无</td><td>无</td><td>无</td><td>无</td><td>无</td></tr></tbody></table></div><script src="./assets/tool.js"></script><script type="text/javascript">function handleVal(e,t,s,n){return e/n[t]*n[s]}layui.use(["form","layer"],(function(){let e,t,s=layui.form,n=layui.layer,i=[],a=[];fetch("./assets/db/equipment").then(e=>e.text()).then(n=>{e=JSON.parse(decrypt(n)),t=e.equipmentSet,t.equipment.forEach(e=>{i.push(e.level)}),selectRender({id:"set_level",dataList:i}),a=t.type,selectRender({id:"set_type",dataList:a}),s.render("select")}),s.on("select(set_level)",(function(e){i[e.value]>=140?selectRender({id:"set_type",dataList:a.slice(0,2)}):selectRender({id:"set_type",dataList:a}),s.render("select")})),fetch("./assets/db/base.json").then(e=>e.json()).then(e=>{selectRender({id:"now_star",dataList:e.starList}),selectRender({id:"new_star",dataList:e.starList}),selectRender({id:"set_star",dataList:e.starList}),selectRender({id:"now_inscribed",dataList:e.inscribedList}),selectRender({id:"new_inscribed",dataList:e.inscribedList}),selectRender({id:"set_inscribed",dataList:e.inscribedList}),selectRender({id:"new_enchantments",dataList:e.enchantmentsList}),selectRender({id:"set_enchantments",dataList:e.enchantmentsList}),selectRender({id:"now_quality",dataList:e.qualityList}),s.render("select")}),s.on("submit(formImprove)",(function(t){let s=t.field,i=handleVal(s.now_info,s.now_star,s.new_star,e.star);if(i=handleVal(i,s.now_inscribed,s.new_inscribed,e.inscribed[s.equType]),"0"!==s.new_enchantments&&"0"!==s.now_quality&&"0"===s.equType){let t=e.quality[s.now_quality-1]*e.enchantments[s.new_enchantments-1]*e.star[s.new_star]*e.inscribed[0][s.new_inscribed];$("#new-info2").val(Math.round(t))}else{if("0"!==s.new_enchantments||"0"!==s.now_quality)return n.msg("品质与附魔需同时操作",{icon:2}),!1;$("#new-info2").val("无")}return $("#new-info1").val(Math.round(i)),!1})),s.on("submit(formSet)",(function({field:{set_level:s,set_type:i,set_star:a,set_inscribed:l,set_enchantments:d,set_enchantments_quantity:r}}){s=parseInt(s),i=parseInt(i),a=parseInt(a),l=parseInt(l),d=parseInt(d),r=parseInt(r);let c=t.equipment[s],_={base_spell_defense:0,base_physical_defense:0,spell_defense:0,physical_defense:0,spell_cou:0,physical_cou:0};if(-1!==r){if(0===d)return n.msg("不能单独选附魔类型!需要再选择附魔等级",{icon:2}),!1;let t=e.quality[3]*e.enchantments[d-1],s=t*e.star[a]*e.inscribed[0][l];_.spell_cou=r,_.physical_cou=5-r,_.spell_defense=Math.round(s*r),_.physical_defense=Math.round(s*(5-r)),_.base_spell_defense=Math.round(t*r),_.base_physical_defense=Math.round(t*(5-r))}let o=[];for(let e=0;e<8;e++)e<1&&o.push(c.clothe.defense[i]),e>=1&&e<3&&o.push(c.head.defense[i]),e>=3&&e<5&&o.push(c.sash.defense[i]),5===e&&o.push(c.shoulder.defense[i]),6===e&&o.push(c.cloak.defense[i]),7===e&&o.push("无");let p=listZoom(o,e.star[a]*e.inscribed[0][l]);0===i&&(_.base_spell_defense+=listSum(o),_.base_physical_defense+=listSum(o),_.spell_defense+=listSum(p),_.physical_defense+=listSum(p)),1===i&&(_.base_spell_defense+=listSum(o),_.spell_defense+=listSum(p)),2===i&&(_.base_physical_defense+=listSum(o),_.physical_defense+=listSum(p));let u=getRetrofit(c),f=$("#set_table_primitive td"),h=$("#set_table_improve td"),m=$("#set_table_retrofit td");for(let e=1;e<f.length;e++)f[e].innerHTML=o[e-1],h[e].innerHTML=p[e-1],m[e].innerHTML=u[e-1],9===e&&(f[e].innerHTML=`法防:${_.base_spell_defense}<br/>\n                                      物防:${_.base_physical_defense}`,h[e].innerHTML=`法防:${_.spell_defense}<br/>\n                                            物防:${_.physical_defense}`);return n.open({type:0,title:`<div style="margin: 0 auto;width: fit-content;\n            font-weight: bold;font-size: 17px">\n            ${c.level+t.type[i]}套装模拟结果\n            <span style="font-weight: normal;font-size: 16px;color: #1e9fff">&emsp;${a}星${l}铭刻${d}级附魔\n            [${_.spell_cou}法\n            ${_.physical_cou}物]</span></div>`,content:$("#content_set_table").html()}),!1}))}))</script></body></html>