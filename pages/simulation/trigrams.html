<!DOCTYPE html><html lang="zh_CN"><head><meta charset="UTF-8"><title>八卦和宝石</title><style type="text/css">#trigrams{background-color:#ffea7e;box-shadow:0 0 10px #fe5a00;border-radius:5px;margin-bottom:15px}#jewels{background-color:#9b8ce9;box-shadow:0 0 10px #fd7fe7;border-radius:5px;margin-top:10px;padding:5px}</style></head><body><div class="layui-col-xs12" id="trigrams"><fieldset class="layui-elem-field layui-field-title" style="margin-top:20px"><legend>乾坤八卦提升</legend></fieldset><form class="layui-form"><div class="layui-form-item"><div class="layui-inline"><label class="layui-form-label">八卦类别</label><div class="layui-input-inline" style="width:80px;text-align:center"><select name="trigramsSelect" lay-verify="required" id="trigramsSelect"></select></div><label class="layui-form-label">初始阶级</label><div class="layui-input-inline" style="width:180px;text-align:center;text-align-last:center"><select name="startTrigramsLevel" lay-verify="required|trigramsVerify" id="startTrigramsLevel" lay-search></select></div><label class="layui-form-label">目标阶级</label><div class="layui-input-inline" style="width:180px;text-align:center;text-align-last:center"><select name="endTrigramsLevel" lay-verify="required|trigramsVerify" id="endTrigramsLevel" lay-search></select></div></div><div class="layui-form-item"><div class="layui-input-block"><button type="submit" class="layui-btn layui-btn-normal" lay-submit lay-filter="trigramsMock">模拟</button> <button type="reset" class="layui-btn layui-btn-danger" id="btnReset">重置</button></div></div></div><div class="layui-form-item" id="trigrams_material_mock"><label class="layui-form-label">升级材料</label><div class="layui-input-inline" style="text-align-last:center;width:112px;text-align:center"><label class="layui-form-label" style="border:rgba(0,0,0,.85) 1px solid">空</label> <input type="text" readonly="readonly" class="layui-input" value="空" style="padding:0"></div></div></form></div><div class="layui-col-xs12" id="jewels"><fieldset class="layui-elem-field layui-field-title" style="margin-top:20px"><legend>宝石模拟</legend></fieldset><form class="layui-form layui-form-pane"><div class="layui-form-item"><div class="layui-form-item"><label class="layui-form-label">宝石类别</label><div class="layui-input-inline" style="width:110px;text-align:center;text-align-last:center"><select name="jewelsSelect" lay-verify="required"><option value="0" selected="selected">天&ensp;寿&ensp;石</option><option value="1">天&ensp;速&ensp;石</option><option value="2">天勇|天损</option></select></div><label class="layui-form-label">宝石等级</label><div class="layui-input-inline" style="width:80px;text-align:center;text-align-last:center"><select name="jewelsLevel" lay-verify="required"><option value="2" selected="selected">三级</option><option value="3">四级</option><option value="4">五级</option><option value="5">六级</option></select></div><label class="layui-form-label">模拟个数</label><div class="layui-input-inline" style="width:80px;text-align:center;text-align-last:center"><input type="text" name="jewelsQuantity" class="layui-input" value="1" lay-verify="required|number|jewelsVerify" style="padding:0"></div></div><div class="layui-form-item"><label class="layui-form-label">人物角色</label><div class="layui-input-inline" style="width:80px;text-align:center;text-align-last:center"><select name="character" lay-verify="required"><option value="0" selected="selected">术士</option><option value="1">修真</option><option value="2">侠客</option><option value="3">刺客</option></select></div><label class="layui-form-label">宝石品质</label><div class="layui-input-inline" style="width:80px;text-align:center;text-align-last:center"><select name="jewelsQuality" lay-verify="required"><option value="0" selected="selected">基础</option><option value="1">普通</option><option value="2">无暇</option><option value="3">完美</option></select></div></div><div class="layui-form-item"><div class="layui-input-block"><button type="submit" class="layui-btn layui-btn-normal" lay-submit lay-filter="jewelsMock">模拟</button> <button type="reset" class="layui-btn layui-btn-danger" onclick="jewelsEnhance(0,{})">重置</button> <span style="color:#000">PS:对结果进行了便捷化处理,舍弃了精度</span></div></div></div><div class="layui-form-item" id="jewelsEnh"><div class="layui-form-item"><label class="layui-form-label">面板提升</label><div class="layui-input-inline" style="text-align-last:center;width:110px;text-align:center"><label class="layui-form-label" style="border:rgba(0,0,0,.85) 1px solid">空</label> <input type="text" readonly="readonly" class="layui-input" value="空" style="padding:0"></div></div></div></form></div><script src="./assets/tool.js"></script><script type="text/javascript">const flag={id:0,count:2};function closeLoading(e){flag.count=flag.count-1,flag.count<=0&&e.close(flag.id)}let trigrams,jewels,$trigrams_material_mock=$("#trigrams_material_mock"),$jewelsEnh=$("#jewelsEnh");function trigramsMaterial(e,l,t){function a(e){const l={bleak:0,bright:0,shine:0};function t(e,l){let t=0;for(let a=e;a<l+1;a++)t+=trigrams.materials[a];return t}return e<19&&(l.bleak=t(0,e)),e>=19&&e<37&&(l.bleak=t(0,18),l.bright=t(19,e)),e>=37&&e<54&&(l.bleak=t(0,18),l.bright=t(19,36),l.shine=t(37,e)),l}e=parseInt(e),l=parseInt(l),t=parseInt(t);let n=a(l),i=a(t);const s={type:"无",bleak:i.bleak-n.bleak,bright:i.bright-n.bright,shine:i.shine-n.shine};return e<3?s.type="青龙":e<5?s.type="玄武":e<7?s.type="白虎":e<9&&(s.type="朱雀"),s}function jewelsInfo(e,l,t,a,n){let i=0;const s=[],r=[];function p(e,l,t,a){let n=[0,0,0,0];switch(t){case"wushan":n=[.5,1,1,1.88];break;case"wubao":n=[1.5,2.25,3.5,5];break;case"wumin":n=[25,18,27,21.6]}return n[e]*l*a}switch(l){case 0:i=jewels.pink[t][e],s.push("血量","法量","怒气","速度","恢复","物攻|物防"),r.push(24*i*a,1*i*a,8*i*a,.2*i*a,.8*i*a,.1*i*a);break;case 1:i=jewels.pink[t][e],s.push("速度","血量","法量|怒气","恢复","物攻|物防","物闪","物爆","物命"),r.push(2*i*a,3*i*a,2*i*a,.2*i*a,.2*i*a,p(n,i,"wushan",a),p(n,i,"wubao",a),p(n,i,"wumin",a));break;case 2:i=jewels.lilac[t][e],s.push("攻击"),r.push(i*a)}return{nameList:s,valList:r}}function jewelsEnhance(e,{nameList:l,valList:t}){$jewelsEnh.empty();let a=$('<div class="layui-form-item"></div>'),n=$('<div class="layui-form-item"></div>');if(a.append('<label class="layui-form-label">面板提升</label>'),n.append('<label class="layui-form-label">&emsp;</label>'),0===e)a.append('<div class="layui-input-inline" style="text-align-last:center;width: 110px;text-align: center">\n          <label class="layui-form-label" style="border: rgba(0,0,0,.85) 1px solid">空</label>\n          <input type="text" readonly class="layui-input" value="空" style="padding: 0">\n        </div>');else for(let e=0;e<l.length;e++)e<5?a.append(`\n              <div class="layui-input-inline" style="text-align-last:center;width: 110px;text-align: center">\n                <label class="layui-form-label" style="border: rgba(0,0,0,.85) 1px solid">${l[e]}</label>\n                <input type="text" readonly class="layui-input" value="${Math.round(t[e])}" style="padding: 0">\n              </div>\n              `):n.append(`\n              <div class="layui-input-inline" style="text-align-last:center;width: 110px;text-align: center">\n                <label class="layui-form-label" style="border: rgba(0,0,0,.85) 1px solid">${l[e]}</label>\n                <input type="text" readonly class="layui-input" value="${Math.round(t[e])}" style="padding: 0">\n              </div>\n            `);$jewelsEnh.append(a),l.length>5&&$jewelsEnh.append(n)}$((function(){$("#btnReset").click((function(){$trigrams_material_mock.empty(),$trigrams_material_mock.append('\n        <label class="layui-form-label">升级材料</label>\n        <div class="layui-input-inline" style="text-align-last:center;width: 112px;text-align: center">\n          <label class="layui-form-label" style="border: rgba(0,0,0,.85) 1px solid">空</label>\n          <input type="text" readonly class="layui-input" value="空" style="padding: 0">\n        </div>\n        ')}))})),layui.use(["form","layer"],(function(){let e=layui.form,l=layui.layer;e.verify({trigramsVerify:function(e){if(parseInt($("#startTrigramsLevel").val())>parseInt($("#endTrigramsLevel").val()))return"初始阶级不能大于目标阶级"},jewelsVerify:function(e){if(e<=0||e>120)return"宝石数量不符合逻辑"}}),flag.id=l.msg("正在加载数据...",{icon:16,shade:.3,time:0}),fetch("./assets/db/base.json").then(e=>e.json()).then((function({trigramsList:t}){let a=$("#trigramsSelect");for(let e=0;e<t.length;e++)a.append(`<option value="${e}">${t[e]}</option>`);e.render("select"),closeLoading(l)})),fetch("./assets/db/jewels").then(e=>e.text()).then(t=>{let a=$("#startTrigramsLevel"),n=$("#endTrigramsLevel");trigrams=JSON.parse(decrypt(t)).trigrams,jewels=JSON.parse(decrypt(t)).jewels;for(let e=0;e<trigrams.name.length;e++)0===e?a.append(`<option value="${e}" selected>${trigrams.name[e]}</option>`):a.append(`<option value="${e}">${trigrams.name[e]}</option>`),e===trigrams.name.length-1?n.append(`<option value="${e}" selected>${trigrams.name[e]}</option>`):n.append(`<option value="${e}">${trigrams.name[e]}</option>`);e.render("select"),closeLoading(l)}),e.on("submit(trigramsMock)",(function({field:{trigramsSelect:e,startTrigramsLevel:l,endTrigramsLevel:t}}){const a=trigramsMaterial(e,l,t);return $trigrams_material_mock.empty(),$trigrams_material_mock.append('<label class="layui-form-label">升级材料</label>'),$trigrams_material_mock.append(`\n            <div class="layui-input-inline" style="text-align-last:center;width: 112px;text-align: center">\n              <label class="layui-form-label" style="border: rgba(0,0,0,.85) 1px solid">暗淡的${a.type}</label>\n              <input type="text" readonly class="layui-input" value="${a.bleak}" style="padding: 0">\n            </div>\n            `),$trigrams_material_mock.append(`\n            <div class="layui-input-inline" style="text-align-last:center;width: 112px;text-align: center">\n              <label class="layui-form-label" style="border: rgba(0,0,0,.85) 1px solid">明亮的${a.type}</label>\n              <input type="text" readonly class="layui-input" value="${a.bright}" style="padding: 0">\n            </div>\n            `),$trigrams_material_mock.append(`\n            <div class="layui-input-inline" style="text-align-last:center;width: 112px;text-align: center">\n              <label class="layui-form-label" style="border: rgba(0,0,0,.85) 1px solid">闪耀的${a.type}</label>\n              <input type="text" readonly class="layui-input" value="${a.shine}" style="padding: 0">\n            </div>\n            `),!1})),e.on("submit(jewelsMock)",(function({field:{jewelsQuality:e,jewelsSelect:l,jewelsLevel:t,jewelsQuantity:a,character:n}}){return jewelsEnhance(1,jewelsInfo(parseInt(e),parseInt(l),parseInt(t),parseInt(a),parseInt(n))),!1}))}))</script></body></html>